<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>React - Template</title>
    <link rel="stylesheet" href="../../css/main.css">
    <script src="../../js/react.min.js"></script>
    <script src="../../js/react-dom.min.js"></script>
    <script src="../../js/browser.min.js"></script>
</head>
<body>

<div id="container"></div>


<script type="text/babel">

    var DeviceList = React.createClass({


        getInitialState: function () {
            return {


                "master":  {
                    "name":   "Master",
                    "image":  "images/router1.jpg",
                    "status": "up",
                    "ip":     "55.34.75.234",
                    "speed":  "128/128"
                },
                "devices": [
                    {
                        "device": {
                            "name":     "PLA1",
                            "image":    "images/router2.jpg",
                            "status":   "up",
                            "ip":       "0.0.0.0",
                            "speed":    "128/128",
                            "children": [
                                {
                                    "device": {
                                        "name":     "PLA2",
                                        "image":    "images/router3.jpg",
                                        "status":   "up",
                                        "ip":       "10.46.34.156",
                                        "speed":    "128/128",
                                        "children": [
                                            {
                                                "device": {
                                                    "name":   "PLA5",
                                                    "image":  "images/router4.jpg",
                                                    "status": "down",
                                                    "ip":     "24.156.56.35",
                                                    "speed":  "128/128"
                                                }
                                            },
                                            {
                                                "device": {
                                                    "name":   "PLA6",
                                                    "image":  "images/router5.jpeg",
                                                    "status": "up",
                                                    "ip":     "63.45.26.75",
                                                    "speed":  "128/128"
                                                }
                                            }
                                        ]
                                    }
                                },
                                {
                                    "device": {
                                        "name":   "PLA3",
                                        "image":  "images/router6.jpg",
                                        "status": "up",
                                        "ip":     "55.33.65.34",
                                        "speed":  "128/128"
                                    }
                                },
                                {
                                    "device": {
                                        "name":     "PLA4",
                                        "image":    "images/router1.jpg",
                                        "status":   "up",
                                        "ip":       "45.67.36.35",
                                        "speed":    "128/128",
                                        "children": [
                                            {
                                                "device": {
                                                    "name":   "PLA7",
                                                    "image":  "images/router1.jpg",
                                                    "status": "up",
                                                    "ip":     "66.33.73.42",
                                                    "speed":  "128/128"
                                                }
                                            }
                                        ]
                                    }
                                }
                            ]
                        }
                    },
                    {
                        "device": {
                            "name":   "PLA8",
                            "image":  "images/router1.jpg",
                            "status": "down",
                            "ip":     "34.54.22.44",
                            "speed":  "0/0"
                        }
                    }
                ]
            }


        },


        dlMaster: function (image) {
            return (
                    <div className="DL__master hasChildren">
                        {this.dlSingle(this.state.master.name, this.state.master.image, this.state.master.status, this.state.master.ip)}
                    </div>
            )
        },

        dlSpeed: function (speed) {
            if (speed) {
                return (
                        <div className="DL__single__speed">
                            <div>Speed:</div>
                            <div>{speed}</div>
                        </div>
                )
            }
        },

        dlSingle: function (name = 'Name', image = 'https://dummyimage.com/200x200/e6e6e6/a6a6a6&text=image', status = 'up', ip = '0.0.0.0', speed) {
            return (
                    <div className="DL__single" data-status={status}>
                        {this.dlSpeed(speed)}
                        <div className="DL__single__name">{name}</div>
                        <img className="DL__single__image" src={image} alt=""/>
                        <div className="DL__single__ip">{ip}</div>
                    </div>
            );
        },

        xdlGroup: function () {
            return (
                    <div className="DL__group hasChildren">
                        {this.dlSingle('PLA1', 'https://dummyimage.com/200x200/e6e6e6/a6a6a6&text=PLA1')}
                        <div className="DL__children">

                            <div className="DL__group hasChildren">
                                {this.dlSingle('PLA2', 'https://dummyimage.com/200x200/e6e6e6/a6a6a6&text=PLA2', 'up', '23.46.26.66', '256/256')}
                                <div className="DL__children">
                                    <div className="DL__group">
                                        {this.dlSingle('PLA5', 'https://dummyimage.com/200x200/e6e6e6/a6a6a6&text=PLA5', 'down', '23.45.134.34')}
                                    </div>
                                    <div className="DL__group">
                                        {this.dlSingle('PLA6', 'https://dummyimage.com/200x200/e6e6e6/a6a6a6&text=PLA6')}
                                    </div>
                                </div>
                            </div>

                            <div className="DL__group">
                                {this.dlSingle('PLA3', 'https://dummyimage.com/200x200/e6e6e6/a6a6a6&text=PLA3')}
                            </div>

                            <div className="DL__group">
                                {this.dlSingle('PLA4', 'https://dummyimage.com/200x200/e6e6e6/a6a6a6&text=PLA4')}
                                <div className="DL__children">
                                    <div className="DL__group">
                                        {this.dlSingle('PLA6', 'https://dummyimage.com/200x200/e6e6e6/a6a6a6&text=PLA8')}
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>
            );
        },


        dlDevices: function () {

            return this.state.devices.map(this.dlRenderGroup);

        },


        dlRenderGroup: function (el, i) {
            var hasChildren = '';
            if (el.device.children) {
                hasChildren = ' hasChildren';

            }
            return (
                    <div className={"DL__group" + hasChildren}>
                        {this.dlSingle(el.device.name, el.device.image, el.device.status, el.device.ip, el.device.speed)}
                        {this.dlLoopChildren(el.device.children)}
                    </div>
            )
        },

        dlLoopChildren: function (children) {
            if(children){
                return children.map(this.dlRenderGroup);
            }

        },


        render: function () {
            return (
                    <div className="DL__wrap">

                        {this.dlMaster()}
                        {this.dlDevices()}

                    </div>
            );
        }
    });





    ReactDOM.render(<DeviceList/>, document.getElementById('container'));


</script>
</body>
</html>
